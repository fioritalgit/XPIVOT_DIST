<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:fiorital="it.fiorital.fioritalui5lib.controls"
	xmlns:html="http://www.w3.org/1999/xhtml" xmlns:grid="sap.ui.layout.cssgrid">
	<Dialog id="allocationPopupRra" contentWidth="95%" contentHeight="100%" verticalScrolling="false" horizontalScrolling="false"
		showHeader="false" afterClose="onAfterClose" afterOpen="onAfterOpen">
		<Page title="{$this>title}" class="smallScrollBar">
			<content>
				<html:style>
					.smallScrollBarAltRoute div ::-webkit-scrollbar { width: 0.2em !important; } .noPaddingPanel .sapMPanelContent{padding:0px;} .hdrAllocation1
					{ font-size: x-large; font-weight: bold} .noMargin { margin: 0px !important;} .FOlistBorder {border-top: 1px solidlightgray;}
					.smallScrollBar::-webkit-scrollbar { height: 0.4rem !important; } .bigUMO { font-size:large !important;} .bigSourceATPC { font-size:large
					!important; font-weight:bold !important} .smallRouteId {font-size:small !important; color:grey !important;} .boldPopoverAlternativeRoute
					{font-weight: bold !important} .borderRightAlternativeRoutesPopup{ border-right: 1px solid lightgrey} .textInRoute{color:darkgreen}
					.textOutRoute{color: darkred} .transparentSupplyTable{background: transparent;} .markClusterRed
					tr[data-clusterok="X"]{background-color:#ff000059;} .blinking {animation:blinkingText 0.8s infinite;} @keyframes blinkingText{ 0%{ color:
					red; } 49%{ color: transparent; } 50%{ color: transparent; } 99%{ color:transparent; } 100%{ color: red; } } .padTopTab .sapMITBHead{
					padding-top: 0.9em; } .folarger {font-size: larger !important;} .matnrCluster .sapMTextBreakWord{ font-size: large !important;}
					.infottoolLightColor .sapMListInfoTBar { background-color: cadetblue; } .vendorname { font-size: small !important;} .smalltextLabels{
					font-size: smaller !important; color: darkgrey !important;} .charactRequirement{ font-weight: bold;} .moveIconLeft { left:-0.8em;}
					.bordersubtable { border-bottom: 1px solid lightgrey;} div[data-LASTBATCH="X"]{ border-bottom: 0px !important; } .smallerRouteId
					{font-size:smaller !important; color:grey!important;} .matnrsmall {font-size: small !important;} .matnrbold {font-weight: bold !important;}
					.tdnopad td{ padding: 0px !important;} .itemPad3{padding-left:0.7em;} .smalltextCUST{ font-size: smaller !important; color: #ff8888
					!important;} .genericBatch span[data-BATCHID="GENERIC"]{ color: brown !important; font-weight: bold !important; } .allocationtext
					{font-size: larger !important;} .allocationtextbold {font-size: larger !important; font-weight: bold !important;} .smallCarrier
					{font-size:small !important; color: cornflowerblue !important;} .routechain {font-size:small !important; color:#107e3e !important;}
					.boldCustomerExistAlloc { font-weight: bold !important; } div[data-reacheable=""]{ visibility: hidden !important; }
					tr[data-reacheablecluster=""]{ } .noborderSelect li { outline: 0 !important; } .noborderSelect tr { outline: 0 !important; }
					.goodsQuality{font-size: x-small !important; font-weight: bold !important; color: #085caf !important; } .overflowTb td{ overflow: initial }
				</html:style>
				<VBox renderType="Bare" height="12%">
					<HBox height="100%" alignItems="Center">
						<VBox width="5%"></VBox>
						<HBox width="30%">
							<VBox>
								<Text text="{SUPPLYJSONMODELBASE>/matnr} - {SUPPLYJSONMODELBASE>/uom}" class="hdrAllocation1"></Text>
								<Text text="{SUPPLYJSONMODELBASE>/productdescr}"></Text>
							</VBox>
							<VBox width="2em"></VBox>
							<VBox>
								<HBox>
									<Text text="Country of origin: " width="10em"></Text>
									<Text text="{path:'SUPPLYJSONMODELBASE>/origin',formatter:'.noCharactRequired'}" class="charactRequirement"></Text>
								</HBox>
								<HBox>
									<Text text="FAO zone: " width="10em"></Text>
									<Text text="{path:'SUPPLYJSONMODELBASE>/faozone',formatter:'.noCharactRequired'}" class="charactRequirement"></Text>
								</HBox>
								<HBox>
									<Text text="Fishing gear: " width="10em"></Text>
									<Text text="{path:'SUPPLYJSONMODELBASE>/fishgear',formatter:'.noCharactRequired'}" class="charactRequirement"></Text>
								</HBox>
								<HBox>
									<Text text="Producer: " width="10em"></Text>
									<Text text="{path:'SUPPLYJSONMODELBASE>/producer',formatter:'.noCharactRequired'}" class="charactRequirement"></Text>
								</HBox>
								<!-- new -->
								<HBox>
									<Text text="Sizing: " width="10em"></Text>
									<Text text="{path:'SUPPLYJSONMODELBASE>/pezzatura',formatter:'.noCharactRequired'}" class="charactRequirement"></Text>
								</HBox>
								<!-- end new -->
							</VBox>
						</HBox>
						<VBox width="5%"></VBox>
						<HBox width="35%" height="100%">
							<HBox width="40%" height="100%" alignItems="Center">
								<core:Icon src="sap-icon://shipping-status" size="2.5em" press="showMainFO"></core:Icon>
								<VBox width="1em"></VBox>
								<VBox>
									<Text text="{SUPPLYJSONMODELBASE>/deststoragelocation}" class="hdrAllocation1"></Text>
									<Text text="{SUPPLYJSONMODELBASE>/deststoragelocationdescr}"></Text>
									<Text text="@ {SUPPLYJSONMODELBASE>/deliverydate} h: {SUPPLYJSONMODELBASE>/deliverytime}"></Text>
								</VBox>
							</HBox>
							<HBox id="alternativeRouteShow" width="60%" height="100%" alignItems="Center">
								<VBox>
									<core:Icon src="sap-icon://journey-change" size="1em" color="red"></core:Icon>
									<core:Icon src="sap-icon://shipping-status" size="1em" color="red"></core:Icon>
								</VBox>
								<HBox width="0.5em"></HBox>
								<VBox>
									<HBox>
										<fiorital:FioritalText text="{ parts: ['SELECTEDALTERNATIVEROUTE>/freightorderid'], formatter: '.deleteTrailZeros' }" press=".showFO"/>
										<HBox width="0.5em"></HBox>
										<Label
											text="{SELECTEDALTERNATIVEROUTE>/sotradelgort} - ({SELECTEDALTERNATIVEROUTE>/sotradedate} @{ parts: ['SELECTEDALTERNATIVEROUTE>/sotradetime'], formatter: '.formatFOtime' })"></Label>
									</HBox>
									<Text text="{SELECTEDALTERNATIVEROUTE>/carrieridname}"></Text>
								</VBox>
							</HBox>
						</HBox>
						<VBox width="25%">
							<HBox visible="{= ${SUPPLYJSONMODELBASE>/uom} === 'KG' ? false : true }">
								<Text text="selected boxes:" width="10em" class="allocationtext"></Text>
								<VBox renderType="Bare">
									<HBox renderType="Bare" class="sapUiTinyMarginBottom">
										<Text text="{ALLOCATEDQTY>/sum}" id="qtySelected" class="allocationtextbold"></Text>
										<HBox width="0.2em"></HBox>
										<Text text="/ {SUPPLYJSONMODELBASE>/qtytoallocate} {SUPPLYJSONMODELBASE>/uom}" class="allocationtext"></Text>
									</HBox>
									<HBox renderType="Bare">
										<Text text="{ALLOCATEDQTY>/sumkg}" class="allocationtextbold"></Text>
										<HBox width="0.2em"></HBox>
										<Text text="KG" class="allocationtext"></Text>
									</HBox>
								</VBox>
							</HBox>
							<HBox visible="{= ${SUPPLYJSONMODELBASE>/uom} === 'KG' ? true : false }">
								<Text text="selected boxes:" width="10em" class="allocationtext"></Text>
								<VBox renderType="Bare">
									<HBox renderType="Bare" class="sapUiTinyMarginBottom">
										<Text text="{ALLOCATEDQTY>/sumkg}" id="qtySelected2" class="allocationtextbold"></Text>
										<HBox width="0.2em"></HBox>
										<Text text="/ {SUPPLYJSONMODELBASE>/qtytoallocate} {SUPPLYJSONMODELBASE>/uom}" class="allocationtext"></Text>
									</HBox>
									<HBox renderType="Bare">
										<Text text="{ALLOCATEDQTY>/sum}" class="allocationtextbold"></Text>
										<HBox width="0.2em"></HBox>
										<Text text="CP" class="allocationtext"></Text>
									</HBox>
								</VBox>
							</HBox>
							<HBox height="0.3em"></HBox>
							<HBox>
								<core:Icon src="sap-icon://status-positive" size="1.4em" id="iconOverSelection"
									visible="{parts:['ALLOCATEDQTY>/sum','SUPPLYJSONMODELBASE>/qtytoallocate'],formatter:'.hideoverallocationicon'}"/>
								<HBox width="0.5em"></HBox>
								<Text text="{parts:['ALLOCATEDQTY>/sum','SUPPLYJSONMODELBASE>/qtytoallocate'],formatter:'.formatAllocationText'}" class="allocationtext"
									visible="{parts:['ALLOCATEDQTY>/sum','SUPPLYJSONMODELBASE>/qtytoallocate'],formatter:'.hideoverallocationicon'}"/>
							</HBox>
						</VBox>
					</HBox>
				</VBox>
				<Panel height="88%">
					<IconTabBar id="idIconTabBar" stretchContentHeight="true" class="noPadding noMargin padTopTab" expandable="false" tabDensityMode="Compact"
						select=".changeSupplyPage">
						<items>
							<IconTabFilter icon="sap-icon://database" iconColor="Positive" text="Basic" key="basic">
								<content>
									<ScrollContainer height="100%" width="100%" vertical="true">
										<Table id="allocationBasicList" inset="false" items="{path:'SUPPLYJSONMODEL>/', length: 9999}" growing="false" sticky="ColumnHeaders"
											class="markClusterRed noborderSelect">
											<headerToolbar></headerToolbar>
											<infoToolbar>
												<Toolbar active="ture">
													<Label text="main availability for demand"/>
												</Toolbar>
											</infoToolbar>
											<columns>
												<Column width="4%" mergeDuplicates="true" mergeFunctionName="getTooltip">
													<Text text=''/>
												</Column>
												<Column width="6%" mergeDuplicates="true" mergeFunctionName="getTooltip">
													<Text text="supply type"/>
												</Column>
												<Column width="10%" mergeDuplicates="true" mergeFunctionName="getTooltip">
													<Text text="trade item"/>
												</Column>
												<Column width="6%">
													<Text text="route"/>
												</Column>
												<Column width="7%">
													<Text text='avail. time'/>
												</Column>
												<Column width="4%">
													<Text text="max qty."/>
												</Column>
												<Column width="5%">
													<Text text=""/>
												</Column>
												<Column width="60%">
													<Text text="batches"/>
												</Column>
											</columns>
											<items>
												<ColumnListItem >
													<customData>
														<core:CustomData key="CLUSTEROK" value="{SUPPLYJSONMODEL>overAllocation}" writeToDom="true"/>
														<core:CustomData key="reacheablecluster" value="{SUPPLYJSONMODEL>reacheablecluster}" writeToDom="true"/>
													</customData>
													<cells>
														<core:Icon src="{ parts: ['SUPPLYJSONMODEL>supplyType'], formatter: '.formatIconSupplyType' }" size="2em" color="lightgrey" class="itemPad3"
															tooltip="{SUPPLYJSONMODEL>matnr}-{SUPPLYJSONMODEL>node}-{SUPPLYJSONMODEL>supplyType}-{SUPPLYJSONMODEL>supplyId}"></core:Icon>
														<VBox tooltip="{SUPPLYJSONMODEL>matnr}-{SUPPLYJSONMODEL>node}-{SUPPLYJSONMODEL>supplyType}-{SUPPLYJSONMODEL>supplyId}">
															<VBox height="0.9em"></VBox>
															<Text text="{SUPPLYJSONMODEL>node}" class="bigSourceATPC"></Text>
															<Text text="{path:'SUPPLYJSONMODEL>supplyType',formatter:'.supplyTypeText'}"></Text>
															<Text text="{path:'SUPPLYJSONMODEL>supplyId', formatter: '.deleteTrailZeros'}"
																visible="{path:'SUPPLYJSONMODEL>supplyId',formatter:'.hideSupplyId'}" class="smalltextBD"></Text>
															<HBox visible="{path:'SUPPLYJSONMODEL>atpcCustomer',formatter:'.hideAtpcCustomer'}">
																<Text text="{SUPPLYJSONMODEL>atpcCustomer}"></Text>
																<HBox width="0.3em"></HBox>
																<Text text="{SUPPLYJSONMODEL>atpcCustomerName}" class="smalltextCUST"></Text>
															</HBox>
														</VBox>
														<VBox tooltip="{SUPPLYJSONMODEL>matnr}-{SUPPLYJSONMODEL>node}-{SUPPLYJSONMODEL>supplyType}-{SUPPLYJSONMODEL>supplyId}">
															<Text text="{SUPPLYJSONMODEL>matnr}" class="matnrbold"></Text>
															<Text text="{SUPPLYJSONMODEL>maktx}" class="matnrsmall"></Text>
														</VBox>
														<VBox renderType="Bare" alignItems="Center">
															<core:Icon src="{ parts: ['SUPPLYJSONMODEL>routesCnt','SUPPLYJSONMODEL>adiacentRoute'], formatter: '.formatIconMultiRoute' }" size="1.5em"
																press=".multiRouteShow"
																visible="{ parts: ['SUPPLYJSONMODEL>routesCnt','SUPPLYJSONMODEL>destNode','SUPPLYJSONMODEL>node','SUPPLYJSONMODEL>adiacentRoute'], formatter: '.formatIconMultiRouteVisible' }"
																color="{ parts: ['SUPPLYJSONMODEL>routesCnt','SUPPLYJSONMODEL>destNode','SUPPLYJSONMODEL>node','SUPPLYJSONMODEL>adiacentRoute'], formatter: '.formatIconMultiRouteColor' }"
																class="moveIconLeft"></core:Icon>
															<fiorital:FioritalText text="{SUPPLYJSONMODEL>routeid}" width="6em" class="smallerRouteId" press=".multiRouteShowSingle"
																visible="{parts:['SUPPLYJSONMODEL>destNode','SUPPLYJSONMODEL>node','SUPPLYJSONMODEL>adiacentRoute','SUPPLYJSONMODEL>routesCnt'],formatter:'.hideRouteOnStock'}"></fiorital:FioritalText>
														</VBox>
														<ObjectIdentifier title="{ parts: ['SUPPLYJSONMODEL>sourceAvailabilityDate','SUPPLYJSONMODEL>supplyType'], formatter: '.formatAvailDate' }"
															text="{ parts: ['SUPPLYJSONMODEL>sourceAvailabilityTime','SUPPLYJSONMODEL>supplyType'], formatter: '.formatAvailTimePopover' }"
															titleActive="false"/>
														<Text text="{SUPPLYJSONMODEL>qtyMaxCluster}" class="bigSourceATPC"></Text>
														<Text text="{SUPPLYJSONMODEL>uom}" class="bigSourceATPC"></Text>
														<List id="batchList" visible="true"
															items="{path: 'SUPPLYJSONMODEL>batches' , length: 9999 , filters: [{ path: 'defaultRouteid', operator: 'EQ', value1: 'X'}]}">
															<items>
																<CustomListItem class="transparentSupplyTable">
																	<HBox height="5.5em" alignContent="Center" alignItems="Center">
																		<HBox width="1em"></HBox>
																		<core:Icon src="sap-icon://blank-tag" press=".showBatchDetails"></core:Icon>
																		<HBox width="1em"></HBox>
																		<VBox>
																			<fiorital:FioritalText text="HU: {path:'SUPPLYJSONMODEL>exidv',formatter:'.deleteTrailZeros'}" fontSize="0.8em" padTop="0.2em"
																				visible="{= ${SUPPLYJSONMODEL>exidv} !== '' ? true : false }"/>
																			<fiorital:FioritalText text="({path:'SUPPLYJSONMODEL>exidv2',formatter:'.deleteTrailZeros'})" fontSize="0.8em" color="darkgrey"
																				padBottom="0.2em" visible="{= ${SUPPLYJSONMODEL>exidv2} !== '' ? true : false }"/>
																			<Label text="{SUPPLYJSONMODEL>charg}" width="8em">
																				<customData>
																					<core:CustomData key="BATCHID" value="{SUPPLYJSONMODEL>charg}" writeToDom="true"/>
																				</customData>
																			</Label>
																			<HBox>
																				<Text text="{path:'SUPPLYJSONMODEL>goodsQuality',formatter:'.textGoodsQuality'}" class="goodsQuality sapUiTinyMarginEnd"></Text>
																				<core:Icon size="1em" color="green" src="sap-icon://heating-cooling"
																					visible="{path:'SUPPLYJSONMODEL>specialBatch',formatter:'.showIceRework'}" class="sapUiTinyMarginEnd" tooltip="batch righiacciato"/>
																				<core:Icon size="1em" color="blue" src="sap-icon://e-care"
																					visible="{path:'SUPPLYJSONMODEL>specialBatch',formatter:'.showSanificationRework'}" tooltip="batch bonificato"/>
																				<Label text="{path:'SUPPLYJSONMODEL>goodsQuality}"></Label>
																			</HBox>
																			<fiorital:FioritalText text="{SUPPLYJSONMODEL>originPo}" bold="false" color="#427cac" fontSize="0.7rem"/>
																			<fiorital:FioritalText text="{SUPPLYJSONMODEL>vendorBatch}" bold="false" color="red" fontSize="0.7rem"/>
																		</VBox>
																		<HBox width="1em"></HBox>
																		<VBox>
																			<fiorital:FioritalText text="{path:'SUPPLYJSONMODEL>kgHuAvailable'} kg" fontSize="0.8em" color="darkgrey" padBottom="0.2em"
																				visible="{= ${SUPPLYJSONMODEL>exidv2} !== '' ? true : false }"/>
																			<Text text="{SUPPLYJSONMODEL>qtyAvailable} / {SUPPLYJSONMODEL>qtyTotal}" width="8em"></Text>
																		</VBox>
																		<HBox width="1em"></HBox>
																		<fiorital:FioritalInput type="Number" width="5em" value="{SUPPLYJSONMODEL>allocateQty}" change=".valueAllocationChange">
																			<fiorital:customData>
																				<core:CustomData key="REFCOL" value="1" writeToDom="true"/>
																				<core:CustomData key="DATACOL" value="X" writeToDom="true"/>
																				<core:CustomData key="reacheable" value="{SUPPLYJSONMODEL>reacheable}" writeToDom="true"/>
																			</fiorital:customData>
																		</fiorital:FioritalInput>
																		<HBox width="1em"></HBox>
																		<Text text="{SUPPLYJSONMODEL>origin}" width="3em"></Text>
																		<HBox width="0.5em"></HBox>
																		<Text text="{SUPPLYJSONMODEL>faozone}" width="3em"></Text>
																		<HBox width="0.5em"></HBox>
																		<Text text="{SUPPLYJSONMODEL>fishgear}" width="7em"></Text>
																		<HBox width="0.5em"></HBox>
																		<VBox width="18em">
																			<HBox visible="{parts:['SUPPLYJSONMODEL>producer','SUPPLYJSONMODEL>vendorpartner','SUPPLYJSONMODEL>charg'],formatter:'.vendorVisible'}">
																				<Text text="Fornitore:" width="6em" class="smalltextLabels"></Text>
																				<Text text="{SUPPLYJSONMODEL>vendorpartnername}" width="100%" class="vendorname"></Text>
																			</HBox>
																			<HBox visible="{parts:['SUPPLYJSONMODEL>producer','SUPPLYJSONMODEL>vendorpartner','SUPPLYJSONMODEL>charg'],formatter:'.producerVisible'}">
																				<Text text="Produttore:" width="6em" class="smalltextLabels"></Text>
																				<Text text="{SUPPLYJSONMODEL>producername}" width="100%" class="vendorname"></Text>
																			</HBox>
																		</VBox>
																		<VBox width="12em">
																			<HBox>
																				<Text text="Arrivo:" width="5.5em" class="smalltextLabels"></Text>
																				<Text text="{path:'SUPPLYJSONMODEL>batchLastemDate',formatter:'.formatBatchDates'}" width="8em" class="vendorname"></Text>
																			</HBox>
																			<HBox>
																				<Text text="Scadenza:" width="5.5em" class="smalltextLabels"></Text>
																				<Text text="{path:'SUPPLYJSONMODEL>batchExpireDate',formatter:'.formatBatchDates'}" width="8em" class="vendorname"></Text>
																			</HBox>
																		</VBox>
																		<HBox width="20em" renderType="Bare">
																			<Text text="Prezzo Riferimento:" width="5.5em" class="smalltextLabels sapUiTinyMarginBeginEnd"></Text>
																			<fiorital:FioritalInput width="5em" value="{path: 'SUPPLYJSONMODEL>unitpricetrade', type: '.FloatParse2D'}">
																				<fiorital:customData>
																					<core:CustomData key="REFCOL" value="2" writeToDom="true"/>
																					<core:CustomData key="DATACOL" value="X" writeToDom="true"/>
																				</fiorital:customData>
																			</fiorital:FioritalInput>
																		</HBox>
																		<!-- end new -->
																	</HBox>
																</CustomListItem>
															</items>
														</List>
													</cells>
												</ColumnListItem>
											</items>
										</Table>
									</ScrollContainer>
								</content>
							</IconTabFilter>
							<IconTabFilter icon="sap-icon://blank-tag" iconColor="Neutral" text="all" key="all">
								<content>
									<ScrollContainer height="100%" width="100%" vertical="true">
										<Table id="allocationAllList" inset="false" items="{path:'SUPPLYJSONMODELALL>/', length: 9999}" growing="false" sticky="ColumnHeaders"
											class="markClusterRed infottoolLightColor tdnopad noborderSelect overflowTb">
											<headerToolbar></headerToolbar>
											<infoToolbar>
												<Toolbar active="ture">
													<Label text="main availability for demand"/>
												</Toolbar>
											</infoToolbar>
											<columns>
												<Column width="4%" mergeDuplicates="true" mergeFunctionName="getTooltip">
													<Text text=''/>
												</Column>
												<Column width="6%" mergeDuplicates="true" mergeFunctionName="getTooltip">
													<Text text="supply type"/>
												</Column>
												<Column width="10%" mergeDuplicates="true" mergeFunctionName="getTooltip">
													<Text text="trade item"/>
												</Column>
												<Column width="6%">
													<Text text="route"/>
												</Column>
												<Column width="7%">
													<Text text='avail. time'/>
												</Column>
												<Column width="4%">
													<Text text="max qty."/>
												</Column>
												<Column width="5%">
													<Text text=""/>
												</Column>
												<Column width="54%">
													<Text text="batches"/>
												</Column>
											</columns>
											<items>
												<ColumnListItem >
													<customData>
														<core:CustomData key="CLUSTEROK" value="{SUPPLYJSONMODELALL>overAllocation}" writeToDom="true"/>
														<core:CustomData key="reacheablecluster" value="{SUPPLYJSONMODELALL>reacheablecluster}" writeToDom="true"/>
													</customData>
													<cells>
														<core:Icon src="{ parts: ['SUPPLYJSONMODELALL>supplyType'], formatter: '.formatIconSupplyType' }" size="2em" color="lightgrey"
															class="itemPad3"
															tooltip="{SUPPLYJSONMODELALL>matnr}-{SUPPLYJSONMODELALL>node}-{SUPPLYJSONMODELALL>supplyType}-{SUPPLYJSONMODELALL>supplyId}"></core:Icon>
														<VBox tooltip="{SUPPLYJSONMODELALL>matnr}-{SUPPLYJSONMODELALL>node}-{SUPPLYJSONMODELALL>supplyType}-{SUPPLYJSONMODELALL>supplyId}">
															<VBox height="0.9em"></VBox>
															<Text text="{SUPPLYJSONMODELALL>node}" class="bigSourceATPC"></Text>
															<Text text="{SUPPLYJSONMODELALL>supplyType}"></Text>
															<Text text="{path:'SUPPLYJSONMODELALL>supplyId'}" visible="{path:'SUPPLYJSONMODELALL>supplyId',formatter:'.hideSupplyId'}"
																class="smalltextBD"></Text>
															<HBox visible="{path:'SUPPLYJSONMODELALL>atpcCustomer',formatter:'.hideAtpcCustomer'}">
																<Text text="{SUPPLYJSONMODELALL>atpcCustomer}"></Text>
																<HBox width="0.3em"></HBox>
																<Text text="{SUPPLYJSONMODELALL>atpcCustomerName}" class="smalltextCUST"></Text>
															</HBox>
														</VBox>
														<VBox tooltip="{SUPPLYJSONMODELALL>matnr}-{SUPPLYJSONMODELALL>node}-{SUPPLYJSONMODELALL>supplyType}-{SUPPLYJSONMODELALL>supplyId}">
															<Text text="{SUPPLYJSONMODELALL>matnr}" class="matnrbold"></Text>
															<Text text="{SUPPLYJSONMODELALL>maktx}" class="matnrsmall"></Text>
														</VBox>
														<VBox renderType="Bare" alignItems="Center">
															<core:Icon src="{ parts: ['SUPPLYJSONMODELALL>routesCnt','SUPPLYJSONMODELALL>adiacentRoute'], formatter: '.formatIconMultiRoute' }"
																size="1.5em" press=".multiRouteShow"
																visible="{ parts: ['SUPPLYJSONMODELALL>routesCnt','SUPPLYJSONMODELALL>destNode','SUPPLYJSONMODELALL>node','SUPPLYJSONMODELALL>adiacentRoute'], formatter: '.formatIconMultiRouteVisible' }"
																color="{ parts: ['SUPPLYJSONMODELALL>routesCnt','SUPPLYJSONMODELALL>destNode','SUPPLYJSONMODELALL>node','SUPPLYJSONMODELALL>adiacentRoute'], formatter: '.formatIconMultiRouteColor' }"
																class="moveIconLeft"></core:Icon>
															<fiorital:FioritalText text="{SUPPLYJSONMODELALL>routeid}" width="6em" class="smallerRouteId" press=".multiRouteShowSingle"
																visible="{parts:['SUPPLYJSONMODELALL>destNode','SUPPLYJSONMODELALL>node','SUPPLYJSONMODELALL>adiacentRoute','SUPPLYJSONMODELALL>routesCnt'],formatter:'.hideRouteOnStock'}"></fiorital:FioritalText>
														</VBox>
														<ObjectIdentifier
															title="{ parts: ['SUPPLYJSONMODELALL>sourceAvailabilityDate','SUPPLYJSONMODELALL>supplyType'], formatter: '.formatAvailDate' }"
															text="{ parts: ['SUPPLYJSONMODELALL>sourceAvailabilityTime','SUPPLYJSONMODELALL>supplyType'], formatter: '.formatAvailTimePopover' }"
															titleActive="false"/>
														<VBox class="itemPad3">
															<Text text="{SUPPLYJSONMODELALL>qtyMaxCluster}" class="bigSourceATPC"></Text>
															<Text text="{SUPPLYJSONMODELALL>uom}"></Text>
														</VBox>
														<List id="batchListAll" visible="true" class="genericBatch"
															items="{path: 'SUPPLYJSONMODELALL>batches' , filters: [{ path: 'defaultRouteid', operator: 'EQ', value1: 'X'}]}" width="100%">
															<items>
																<CustomListItem class="transparentSupplyTable">
																	<HBox height="5.5em" alignContent="Center" alignItems="Center" renderType="Bare" class="bordersubtable" width="80%">
																		<customData>
																			<core:CustomData key="LASTBATCH" value="{SUPPLYJSONMODELALL>LASTBATCH}" writeToDom="true"/>
																		</customData>
																		<HBox width="1em"></HBox>
																		<core:Icon src="sap-icon://blank-tag" press=".showBatchDetails"></core:Icon>
																		<HBox width="1em"></HBox>
																		<VBox>
																			<fiorital:FioritalText text="HU: {path:'SUPPLYJSONMODELALL>exidv',formatter:'.deleteTrailZeros'}" fontSize="0.8em" padTop="0.2em"
																				visible="{= ${SUPPLYJSONMODELALL>exidv} !== '' ? true : false }"/>
																			<fiorital:FioritalText text="({path:'SUPPLYJSONMODELALL>exidv2',formatter:'.deleteTrailZeros'})" fontSize="0.8em" color="darkgrey"
																				padBottom="0.2em" visible="{= ${SUPPLYJSONMODELALL>exidv2} !== '' ? true : false }"/>
																			<Label text="{SUPPLYJSONMODELALL>charg}" width="8em">
																				<customData>
																					<core:CustomData key="BATCHID" value="{SUPPLYJSONMODELALL>charg}" writeToDom="true"/>
																				</customData>
																			</Label>
																			<HBox>
																				<Text text="{path:'SUPPLYJSONMODELALL>goodsQuality',formatter:'.textGoodsQuality'}" class="goodsQuality sapUiTinyMarginEnd"></Text>
																				<core:Icon size="1em" color="green" src="sap-icon://heating-cooling"
																					visible="{path:'SUPPLYJSONMODELALL>specialBatch',formatter:'.showIceRework'}" class="sapUiTinyMarginEnd" tooltip="batch righiacciato"/>
																				<core:Icon size="1em" color="blue" src="sap-icon://e-care"
																					visible="{path:'SUPPLYJSONMODELALL>specialBatch',formatter:'.showSanificationRework'}" tooltip="batch bonificato"/>
																			</HBox>
																			<fiorital:FioritalText text="{SUPPLYJSONMODELALL>originPo}" bold="false" color="#427cac" fontSize="0.7rem"/>
																			<fiorital:FioritalText text="{SUPPLYJSONMODELALL>vendorBatch}" bold="false" color="red" fontSize="0.7rem"/>
																		</VBox>
																		<VBox visible="{= ${SUPPLYJSONMODELALL>exidv} !== '' || ${SUPPLYJSONMODELALL>exidv2} !== ''}" class="sapUiSmallMarginEnd">
																			<fiorital:FioritalText text="{SUPPLYJSONMODELALL>zzpalletNotes}" wrapping="true" width="10em"/>
																		</VBox>
																		<!--<HBox width="1em"></HBox>-->
																		<fiorital:FioritalInput type="Number" width="5em" value="{SUPPLYJSONMODELALL>allocateQty}" change=".valueAllocationChange">
																			<fiorital:customData>
																				<core:CustomData key="REFCOL" value="1" writeToDom="true"/>
																				<core:CustomData key="DATACOL" value="X" writeToDom="true"/>
																				<core:CustomData key="reacheable" value="{SUPPLYJSONMODELALL>reacheable}" writeToDom="true"/>
																			</fiorital:customData>
																		</fiorital:FioritalInput>
																		<HBox width="1em"></HBox>
																		<VBox>
																			<fiorital:FioritalText text="{path:'SUPPLYJSONMODELALL>kgHuAvailable'} kg" fontSize="0.8em" color="darkgrey" padBottom="0.2em"
																				visible="{= ${SUPPLYJSONMODELALL>exidv2} !== '' ? true : false }"/>
																			<Text text="{SUPPLYJSONMODELALL>qtyAvailable} / {SUPPLYJSONMODELALL>qtyTotal}" width="8em"></Text>
																		</VBox>
																		<HBox width="1em"></HBox>
																		<VBox width="9em">
																			<Text text="{SUPPLYJSONMODELALL>vendorpartnername}" width="8em" class="vendorname"></Text>
																		</VBox>
																		<VBox width="9em">
																			<HBox>
																				<Text text="EM:" width="2.5em" class="smalltextBD"></Text>
																				<Text text="{path:'SUPPLYJSONMODELALL>batchLastemDate',formatter:'.formatBatchDates'}" width="8em" class="vendorname"></Text>
																			</HBox>
																			<HBox>
																				<Text text="EXP:" width="2.5em" class="smalltextBD"></Text>
																				<Text text="{path:'SUPPLYJSONMODELALL>batchExpireDate',formatter:'.formatBatchDates'}" width="8em" class="vendorname"></Text>
																			</HBox>
																		</VBox>
																		<HBox width="1em"></HBox>
																		<Text text="{SUPPLYJSONMODELALL>origin}" width="3em"></Text>
																		<HBox width="0.5em"></HBox>
																		<Text text="{SUPPLYJSONMODELALL>faozone}" width="3em"></Text>
																		<HBox width="0.5em"></HBox>
																		<Text text="{SUPPLYJSONMODELALL>fishgear}" width="7em"></Text>
																		<HBox width="0.5em"></HBox>
																		<Text text="{SUPPLYJSONMODELALL>vendorpartnername}" width="7em"></Text>
																		<HBox width="20em" renderType="Bare">
																			<Text text="Prezzo Riferimentoto:" width="5.5em" class="smalltextLabels sapUiTinyMarginBeginEnd"></Text>
																			<fiorital:FioritalInput width="5em" value="{path: 'SUPPLYJSONMODELALL>unitpricetrade', type: '.FloatParse2D'}">
																				<fiorital:customData>
																					<core:CustomData key="REFCOL" value="2" writeToDom="true"/>
																					<core:CustomData key="DATACOL" value="X" writeToDom="true"/>
																				</fiorital:customData>
																			</fiorital:FioritalInput>
																		</HBox>
																	</HBox>
																</CustomListItem>
															</items>
														</List>
													</cells>
												</ColumnListItem>
											</items>
										</Table>
									</ScrollContainer>
								</content>
							</IconTabFilter>
							<IconTabFilter icon="sap-icon://overview-chart" iconColor="Neutral" text="alternative" key="alt">
								<content>
									<ScrollContainer height="100%" width="100%" vertical="true">
										<Table id="allocationAlternativeList" inset="false" items="{path:'SUPPLYJSONMODELALTERNATIVE>/', length: 9999}" growing="false"
											sticky="ColumnHeaders" class="markClusterRed noborderSelect">
											<headerToolbar></headerToolbar>
											<infoToolbar>
												<Toolbar active="ture">
													<Label text="main availability for demand"/>
												</Toolbar>
											</infoToolbar>
											<columns>
												<Column width="4%" mergeDuplicates="true" mergeFunctionName="getTooltip">
													<Text text=''/>
												</Column>
												<Column width="6%" mergeDuplicates="true" mergeFunctionName="getTooltip">
													<Text text="supply type"/>
												</Column>
												<Column width="10%" mergeDuplicates="true" mergeFunctionName="getTooltip">
													<Text text="trade item"/>
												</Column>
												<Column width="6%">
													<Text text="route"/>
												</Column>
												<Column width="7%">
													<Text text='avail. time'/>
												</Column>
												<Column width="4%">
													<Text text="max qty."/>
												</Column>
												<Column width="5%">
													<Text text=""/>
												</Column>
												<Column width="60%">
													<Text text="batches"/>
												</Column>
											</columns>
											<items>
												<ColumnListItem >
													<customData>
														<core:CustomData key="CLUSTEROK" value="{SUPPLYJSONMODELALTERNATIVE>overAllocation}" writeToDom="true"/>
														<core:CustomData key="reacheablecluster" value="{SUPPLYJSONMODELALTERNATIVE>reacheablecluster}" writeToDom="true"/>
													</customData>
													<cells>
														<core:Icon src="{ parts: ['SUPPLYJSONMODELALTERNATIVE>supplyType'], formatter: '.formatIconSupplyType' }" size="2em" color="lightgrey"
															class="itemPad3"
															tooltip="{SUPPLYJSONMODELALTERNATIVE>matnr}-{SUPPLYJSONMODELALTERNATIVE>node}-{SUPPLYJSONMODELALTERNATIVE>supplyType}-{SUPPLYJSONMODELALTERNATIVE>supplyId}"></core:Icon>
														<VBox
															tooltip="{SUPPLYJSONMODELALTERNATIVE>matnr}-{SUPPLYJSONMODELALTERNATIVE>node}-{SUPPLYJSONMODELALTERNATIVE>supplyType}-{SUPPLYJSONMODELALTERNATIVE>supplyId}">
															<Text text="{SUPPLYJSONMODELALTERNATIVE>node}" class="bigSourceATPC"></Text>
															<Text text="{path:'SUPPLYJSONMODELALTERNATIVE>supplyType',formatter:'.supplyTypeText'}"></Text>
															<Text text="{parts:['SUPPLYJSONMODELALTERNATIVE>supplyType','SUPPLYJSONMODELALTERNATIVE>supplyId'],formatter:'.supplyIdFormat'}"
																visible="{path:'SUPPLYJSONMODELALTERNATIVE>supplyId',formatter:'.hideSupplyId'}" class="smalltextLabels"></Text>
															<HBox visible="{path:'SUPPLYJSONMODELALTERNATIVE>atpcCustomer',formatter:'.hideAtpcCustomer'}">
																<Text text="{SUPPLYJSONMODELALTERNATIVE>atpcCustomer}"></Text>
																<HBox width="0.3em"></HBox>
																<Text text="{SUPPLYJSONMODELALTERNATIVE>atpcCustomerName}" class="smalltextCUST"></Text>
															</HBox>
														</VBox>
														<VBox
															tooltip="{SUPPLYJSONMODELALTERNATIVE>matnr}-{SUPPLYJSONMODELALTERNATIVE>node}-{SUPPLYJSONMODELALTERNATIVE>supplyType}-{SUPPLYJSONMODELALTERNATIVE>supplyId}">
															<Text text="{SUPPLYJSONMODELALTERNATIVE>matnr}" class="matnrbold"></Text>
															<Text text="{SUPPLYJSONMODELALTERNATIVE>maktx}" class="matnrsmall"></Text>
														</VBox>
														<VBox renderType="Bare" alignItems="Center">
															<core:Icon
																src="{ parts: ['SUPPLYJSONMODELALTERNATIVE>routesCnt','SUPPLYJSONMODELALTERNATIVE>adiacentRoute'], formatter: '.formatIconMultiRoute' }"
																size="1.5em" press=".multiRouteShow"
																visible="{ parts: ['SUPPLYJSONMODELALTERNATIVE>routesCnt','SUPPLYJSONMODELALTERNATIVE>destNode','SUPPLYJSONMODELALTERNATIVE>node','SUPPLYJSONMODELALTERNATIVE>adiacentRoute'], formatter: '.formatIconMultiRouteVisible' }"
																color="{ parts: ['SUPPLYJSONMODELALTERNATIVE>routesCnt','SUPPLYJSONMODELALTERNATIVE>destNode','SUPPLYJSONMODELALTERNATIVE>node','SUPPLYJSONMODELALTERNATIVE>adiacentRoute'], formatter: '.formatIconMultiRouteColor' }"
																class="moveIconLeft"></core:Icon>
															<fiorital:FioritalText text="{SUPPLYJSONMODELALTERNATIVE>routeid}" width="6em" class="smallerRouteId" press=".multiRouteShowSingle"
																visible="{parts:['SUPPLYJSONMODELALTERNATIVE>destNode','SUPPLYJSONMODELALTERNATIVE>node','SUPPLYJSONMODELALTERNATIVE>adiacentRoute','SUPPLYJSONMODELALTERNATIVE>routesCnt'],formatter:'.hideRouteOnStock'}"></fiorital:FioritalText>
														</VBox>
														<ObjectIdentifier
															title="{ parts: ['SUPPLYJSONMODELALTERNATIVE>sourceAvailabilityDate','SUPPLYJSONMODELALTERNATIVE>supplyType','SUPPLYJSONMODELALTERNATIVE>destNode','SUPPLYJSONMODELALTERNATIVE>node'], formatter: '.formatAvailDate' }"
															text="{ parts: ['SUPPLYJSONMODELALTERNATIVE>sourceAvailabilityTime','SUPPLYJSONMODELALTERNATIVE>supplyType','SUPPLYJSONMODELALTERNATIVE>destNode','SUPPLYJSONMODELALTERNATIVE>node'], formatter: '.formatAvailTimePopover' }"
															titleActive="false"/>
														<Text text="{SUPPLYJSONMODELALTERNATIVE>qtyMaxCluster}" class="bigSourceATPC"></Text>
														<Text text="{SUPPLYJSONMODELALTERNATIVE>uom}" class="bigUMO"></Text>
														<List id="batchListAlternative" visible="true" class="genericBatch"
															items="{path: 'SUPPLYJSONMODELALTERNATIVE>batches' , filters: [{ path: 'defaultRouteid', operator: 'EQ', value1: 'X'}]}">
															<items>
																<CustomListItem class="transparentSupplyTable">
																	<HBox height="3.7em" alignContent="Center" alignItems="Center" renderType="Bare" class="bordersubtable">
																		<customData>
																			<core:CustomData key="LASTBATCH" value="{SUPPLYJSONMODELALTERNATIVE>LASTBATCH}" writeToDom="true"/>
																		</customData>
																		<HBox width="1em"></HBox>
																		<core:Icon src="sap-icon://blank-tag" press=".showBatchDetails"></core:Icon>
																		<HBox width="1em"></HBox>
																		<VBox>
																			<fiorital:FioritalText text="HU: {path:'SUPPLYJSONMODELALTERNATIVE>exidv',formatter:'.deleteTrailZeros'}" fontSize="0.8em" padTop="0.2em"
																				visible="{= ${SUPPLYJSONMODELALTERNATIVE>exidv} !== '' ? true : false }"/>
																			<fiorital:FioritalText text="({path:'SUPPLYJSONMODELALTERNATIVE>exidv2',formatter:'.deleteTrailZeros'})" fontSize="0.8em" color="darkgrey"
																				padBottom="0.2em" visible="{= ${SUPPLYJSONMODELALTERNATIVE>exidv2} !== '' ? true : false }"/>
																			<Label text="{SUPPLYJSONMODELALTERNATIVE>charg}" width="8em">
																				<customData>
																					<core:CustomData key="BATCHID" value="{SUPPLYJSONMODELALTERNATIVE>charg}" writeToDom="true"/>
																				</customData>
																			</Label>
																			<HBox>
																				<Text text="{path:'SUPPLYJSONMODELALTERNATIVE>goodsQuality',formatter:'.textGoodsQuality'}" class="goodsQuality sapUiTinyMarginEnd"></Text>
																				<core:Icon size="1em" color="green" src="sap-icon://heating-cooling"
																					visible="{path:'SUPPLYJSONMODELALTERNATIVE>specialBatch',formatter:'.showIceRework'}" class="sapUiTinyMarginEnd"
																					tooltip="batch righiacciato"/>
																				<core:Icon size="1em" color="blue" src="sap-icon://e-care"
																					visible="{path:'SUPPLYJSONMODELALTERNATIVE>specialBatch',formatter:'.showSanificationRework'}" tooltip="batch bonificato"/>
																			</HBox>
																			<fiorital:FioritalText text="{SUPPLYJSONMODELALTERNATIVE>originPo}" bold="false" color="#427cac" fontSize="0.7rem"/>
																			<fiorital:FioritalText text="{SUPPLYJSONMODELALTERNATIVE>vendorBatch}" bold="false" color="red" fontSize="0.7rem"/>
																		</VBox>
																		<HBox width="1em"></HBox>
																		<fiorital:FioritalInput type="Number" width="5em" value="{SUPPLYJSONMODELALTERNATIVE>allocateQty}" change=".valueAllocationChange">
																			<fiorital:customData>
																				<core:CustomData key="REFCOL" value="1" writeToDom="true"/>
																				<core:CustomData key="DATACOL" value="X" writeToDom="true"/>
																				<core:CustomData key="reacheable" value="{SUPPLYJSONMODELALTERNATIVE>reacheable}" writeToDom="true"/>
																			</fiorital:customData>
																		</fiorital:FioritalInput>
																		<HBox width="1em"></HBox>
																		<VBox>
																			<fiorital:FioritalText text="{path:'SUPPLYJSONMODELALTERNATIVE>kgHuAvailable'} kg" fontSize="0.8em" color="darkgrey" padBottom="0.2em"
																				visible="{= ${SUPPLYJSONMODELALTERNATIVE>exidv2} !== '' ? true : false }"/>
																			<Text text="{SUPPLYJSONMODELALTERNATIVE>qtyAvailable} / {SUPPLYJSONMODELALTERNATIVE>qtyTotal}" width="7em"></Text>
																		</VBox>
																		<HBox width="1em"></HBox>
																		<Text text="{SUPPLYJSONMODELALTERNATIVE>origin}" width="3em" class="vendorname"></Text>
																		<HBox width="0.5em"></HBox>
																		<Text text="{SUPPLYJSONMODELALTERNATIVE>faozone}" width="3em" class="vendorname"></Text>
																		<HBox width="0.5em"></HBox>
																		<Text text="{SUPPLYJSONMODELALTERNATIVE>fishgear}" width="7em" class="vendorname"></Text>
																		<HBox width="1em"></HBox>
																		<VBox width="18em">
																			<HBox
																				visible="{parts:['SUPPLYJSONMODELALTERNATIVE>producer','SUPPLYJSONMODELALTERNATIVE>vendorpartner','SUPPLYJSONMODELALTERNATIVE>charg'],formatter:'.vendorVisible'}">
																				<Text text="Fornitore:" width="6em" class="smalltextLabels"></Text>
																				<Text text="{SUPPLYJSONMODELALTERNATIVE>vendorpartnername}" width="100%" class="vendorname"></Text>
																			</HBox>
																			<HBox
																				visible="{parts:['SUPPLYJSONMODELALTERNATIVE>producer','SUPPLYJSONMODELALTERNATIVE>vendorpartner','SUPPLYJSONMODELALTERNATIVE>charg'],formatter:'.producerVisible'}">
																				<Text text="Produttore:" width="6em" class="smalltextLabels"></Text>
																				<Text text="{SUPPLYJSONMODELALTERNATIVE>producername}" width="100%" class="vendorname"></Text>
																			</HBox>
																		</VBox>
																		<VBox width="12em">
																			<HBox>
																				<Text text="Arrivo:" width="5.5em" class="smalltextLabels"></Text>
																				<Text text="{path:'SUPPLYJSONMODELALTERNATIVE>batchLastemDate',formatter:'.formatBatchDates'}" width="8em" class="vendorname"></Text>
																			</HBox>
																			<HBox>
																				<Text text="Scadenza:" width="5.5em" class="smalltextLabels"></Text>
																				<Text text="{path:'SUPPLYJSONMODELALTERNATIVE>batchExpireDate',formatter:'.formatBatchDates'}" width="8em" class="vendorname"></Text>
																			</HBox>
																		</VBox>
																		<HBox width="20em" renderType="Bare">
																			<Text text="Prezzo Riferimentoto:" width="5.5em" class="smalltextLabels sapUiTinyMarginBeginEnd"></Text>
																			<fiorital:FioritalInput width="5em" value="{path: 'SUPPLYJSONMODELALTERNATIVE>unitpricetrade', type: '.FloatParse2D'}">
																				<fiorital:customData>
																					<core:CustomData key="REFCOL" value="2" writeToDom="true"/>
																					<core:CustomData key="DATACOL" value="X" writeToDom="true"/>
																				</fiorital:customData>
																			</fiorital:FioritalInput>
																		</HBox>
																	</HBox>
																</CustomListItem>
															</items>
														</List>
													</cells>
												</ColumnListItem>
											</items>
										</Table>
									</ScrollContainer>
								</content>
							</IconTabFilter>
							<IconTabFilter icon="sap-icon://search" iconColor="Neutral" text="free" key="free">
								<content>
									<Panel height="100%" width="100%" class="noPaddingPanel">
										<HBox height="10%" width="100%" alignItems="Center">
											<VBox width="1.5em"></VBox>
											<Text text="trade item or description:" width="12em"></Text>
											<SearchField width="20em" id="inputtradeitem" search=".gosearchFree" liveChange=".searchlivechange"
												suggestionItems="{ path: 'SUGGESTIONS>/value'}" enableSuggestions="true" suggest=".onSuggest">
												<suggestionItems>
													<SuggestionItem text="{SUGGESTIONS>productcode}" description="{SUGGESTIONS>productdescription}" key="{SUGGESTIONS>productcode}"/>
												</suggestionItems>
											</SearchField>
										</HBox>
										<ScrollContainer height="90%" width="100%" vertical="true">
											<Table id="allocationFreeList" inset="false" items="{SUPPLYJSONMODELFREE>/}" growing="false" sticky="ColumnHeaders"
												class="markClusterRed noborderSelect">
												<headerToolbar></headerToolbar>
												<infoToolbar>
													<Toolbar active="ture">
														<Label text="main availability for demand"/>
													</Toolbar>
												</infoToolbar>
												<columns>
													<Column width="4%" mergeDuplicates="true" mergeFunctionName="getTooltip">
														<Text text=''/>
													</Column>
													<Column width="6%" mergeDuplicates="true" mergeFunctionName="getTooltip">
														<Text text="supply type"/>
													</Column>
													<Column width="10%" mergeDuplicates="true" mergeFunctionName="getTooltip">
														<Text text="trade item"/>
													</Column>
													<Column width="6%">
														<Text text="route"/>
													</Column>
													<Column width="7%">
														<Text text='avail. time'/>
													</Column>
													<Column width="4%">
														<Text text="max qty."/>
													</Column>
													<Column width="5%">
														<Text text=""/>
													</Column>
													<Column width="60%">
														<Text text="batches"/>
													</Column>
												</columns>
												<items>
													<ColumnListItem >
														<customData>
															<core:CustomData key="CLUSTEROK" value="{SUPPLYJSONMODELFREE>overAllocation}" writeToDom="true"/>
															<core:CustomData key="reacheablecluster" value="{SUPPLYJSONMODELFREE>reacheablecluster}" writeToDom="true"/>
														</customData>
														<cells>
															<core:Icon src="{ parts: ['SUPPLYJSONMODELFREE>supplyType'], formatter: '.formatIconSupplyType' }" size="2em" color="lightgrey"
																class="itemPad3"
																tooltip="{SUPPLYJSONMODELFREE>matnr}-{SUPPLYJSONMODELFREE>node}-{SUPPLYJSONMODELFREE>supplyType}-{SUPPLYJSONMODELFREE>supplyId}"></core:Icon>
															<VBox tooltip="{SUPPLYJSONMODELFREE>matnr}-{SUPPLYJSONMODELFREE>node}-{SUPPLYJSONMODELFREE>supplyType}-{SUPPLYJSONMODELFREE>supplyId}">
																<Text text="{SUPPLYJSONMODELFREE>node}" class="bigSourceATPC"></Text>
																<Text text="{path:'SUPPLYJSONMODELFREE>supplyType',formatter:'.supplyTypeText'}"></Text>
																<Text text="{parts:['SUPPLYJSONMODELFREE>supplyType','SUPPLYJSONMODELFREE>supplyId'],formatter:'.supplyIdFormat'}"
																	visible="{path:'SUPPLYJSONMODELFREE>supplyId',formatter:'.hideSupplyId'}" class="smalltextLabels"></Text>
																<HBox visible="{path:'SUPPLYJSONMODELFREE>atpcCustomer',formatter:'.hideAtpcCustomer'}">
																	<Text text="{SUPPLYJSONMODELFREE>atpcCustomer}"></Text>
																	<HBox width="0.3em"></HBox>
																	<Text text="{SUPPLYJSONMODELFREE>atpcCustomerName}" class="smalltextCUST"></Text>
																</HBox>
															</VBox>
															<VBox tooltip="{SUPPLYJSONMODELFREE>matnr}-{SUPPLYJSONMODELFREE>node}-{SUPPLYJSONMODELFREE>supplyType}-{SUPPLYJSONMODELFREE>supplyId}">
																<Text text="{SUPPLYJSONMODELFREE>matnr}" class="matnrbold"></Text>
																<Text text="{SUPPLYJSONMODELFREE>maktx}" class="matnrsmall"></Text>
															</VBox>
															<VBox renderType="Bare" alignItems="Center">
																<core:Icon src="{ parts: ['SUPPLYJSONMODELFREE>routesCnt','SUPPLYJSONMODELFREE>adiacentRoute'], formatter: '.formatIconMultiRoute' }"
																	size="1.5em" press=".multiRouteShow"
																	visible="{ parts: ['SUPPLYJSONMODELFREE>routesCnt','SUPPLYJSONMODELFREE>destNode','SUPPLYJSONMODELFREE>node','SUPPLYJSONMODELFREE>adiacentRoute'], formatter: '.formatIconMultiRouteVisible' }"
																	color="{ parts: ['SUPPLYJSONMODELFREE>routesCnt','SUPPLYJSONMODELFREE>destNode','SUPPLYJSONMODELFREE>node','SUPPLYJSONMODELFREE>adiacentRoute'], formatter: '.formatIconMultiRouteColor' }"
																	class="moveIconLeft"></core:Icon>
																<fiorital:FioritalText text="{SUPPLYJSONMODELFREE>routeid}" width="6em" class="smallerRouteId" press=".multiRouteShowSingle"
																	visible="{parts:['SUPPLYJSONMODELFREE>destNode','SUPPLYJSONMODELFREE>node','SUPPLYJSONMODELFREE>adiacentRoute','SUPPLYJSONMODELFREE>routesCnt'],formatter:'.hideRouteOnStock'}"></fiorital:FioritalText>
															</VBox>
															<ObjectIdentifier
																title="{ parts: ['SUPPLYJSONMODELFREE>sourceAvailabilityDate','SUPPLYJSONMODELFREE>supplyType','SUPPLYJSONMODELFREE>destNode','SUPPLYJSONMODELFREE>node'], formatter: '.formatAvailDate' }"
																text="{ parts: ['SUPPLYJSONMODELFREE>sourceAvailabilityTime','SUPPLYJSONMODELFREE>supplyType','SUPPLYJSONMODELFREE>destNode','SUPPLYJSONMODELFREE>node'], formatter: '.formatAvailTimePopover' }"
																titleActive="false"/>
															<Text text="{SUPPLYJSONMODELFREE>qtyMaxCluster}" class="bigSourceATPC"></Text>
															<Text text="{SUPPLYJSONMODELFREE>uom}" class="bigUMO"></Text>
															<List id="batchListFree" visible="true" class="genericBatch"
																items="{path: 'SUPPLYJSONMODELFREE>batches' , filters: [{ path: 'defaultRouteid', operator: 'EQ', value1: 'X'}]}">
																<items>
																	<CustomListItem class="transparentSupplyTable">
																		<HBox height="3.7em" alignContent="Center" alignItems="Center" renderType="Bare" class="bordersubtable">
																			<customData>
																				<core:CustomData key="LASTBATCH" value="{SUPPLYJSONMODELFREE>LASTBATCH}" writeToDom="true"/>
																			</customData>
																			<HBox width="1em"></HBox>
																			<core:Icon src="sap-icon://blank-tag" press=".showBatchDetails"></core:Icon>
																			<HBox width="1em"></HBox>
																			<VBox>
																				<Label text="{SUPPLYJSONMODELFREE>charg}" width="8em">
																					<customData>
																						<core:CustomData key="BATCHID" value="{SUPPLYJSONMODELFREE>charg}" writeToDom="true"/>
																					</customData>
																				</Label>
																				<HBox>
																					<Text text="{path:'SUPPLYJSONMODELFREE>goodsQuality',formatter:'.textGoodsQuality'}" class="goodsQuality sapUiTinyMarginEnd"></Text>
																					<core:Icon size="1em" color="green" src="sap-icon://heating-cooling"
																						visible="{path:'SUPPLYJSONMODELFREE>specialBatch',formatter:'.showIceRework'}" class="sapUiTinyMarginEnd" tooltip="batch righiacciato"/>
																					<core:Icon size="1em" color="blue" src="sap-icon://e-care"
																						visible="{path:'SUPPLYJSONMODELFREE>specialBatch',formatter:'.showSanificationRework'}" tooltip="batch bonificato"/>
																				</HBox>
																			</VBox>
																			<HBox width="1em"></HBox>
																			<fiorital:FioritalInput type="Number" width="5em" value="{SUPPLYJSONMODELFREE>allocateQty}" change=".valueAllocationChange">
																				<fiorital:customData>
																					<core:CustomData key="REFCOL" value="1" writeToDom="true"/>
																					<core:CustomData key="DATACOL" value="X" writeToDom="true"/>
																					<core:CustomData key="reacheable" value="{SUPPLYJSONMODELFREE>reacheable}" writeToDom="true"/>
																				</fiorital:customData>
																			</fiorital:FioritalInput>
																			<HBox width="1em"></HBox>
																			<VBox>
																				<fiorital:FioritalText text="{path:'SUPPLYJSONMODELFREE>kgHuAvailable'} kg" fontSize="0.8em" color="darkgrey" padBottom="0.2em"
																					visible="{= ${SUPPLYJSONMODELFREE>exidv2} !== '' ? true : false }"/>
																				<Text text="{SUPPLYJSONMODELFREE>qtyAvailable} / {SUPPLYJSONMODELFREE>qtyTotal}" width="7em"></Text>
																			</VBox>
																			<HBox width="1em"></HBox>
																			<Text text="{SUPPLYJSONMODELFREE>origin}" width="3em" class="vendorname"></Text>
																			<HBox width="0.5em"></HBox>
																			<Text text="{SUPPLYJSONMODELFREE>faozone}" width="3em" class="vendorname"></Text>
																			<HBox width="0.5em"></HBox>
																			<Text text="{SUPPLYJSONMODELFREE>fishgear}" width="7em" class="vendorname"></Text>
																			<HBox width="1em"></HBox>
																			<VBox width="18em">
																				<HBox
																					visible="{parts:['SUPPLYJSONMODELFREE>producer','SUPPLYJSONMODELFREE>vendorpartner','SUPPLYJSONMODELFREE>charg'],formatter:'.vendorVisible'}">
																					<Text text="Fornitore:" width="6em" class="smalltextLabels"></Text>
																					<Text text="{SUPPLYJSONMODELFREE>vendorpartnername}" width="100%" class="vendorname"></Text>
																				</HBox>
																				<HBox
																					visible="{parts:['SUPPLYJSONMODELFREE>producer','SUPPLYJSONMODELFREE>vendorpartner','SUPPLYJSONMODELFREE>charg'],formatter:'.producerVisible'}">
																					<Text text="Produttore:" width="6em" class="smalltextLabels"></Text>
																					<Text text="{SUPPLYJSONMODELFREE>producername}" width="100%" class="vendorname"></Text>
																				</HBox>
																			</VBox>
																			<VBox width="12em">
																				<HBox>
																					<Text text="Arrivo:" width="5.5em" class="smalltextLabels"></Text>
																					<Text text="{path:'SUPPLYJSONMODELFREE>batchLastemDate',formatter:'.formatBatchDates'}" width="8em" class="vendorname"></Text>
																				</HBox>
																				<HBox>
																					<Text text="Scadenza:" width="5.5em" class="smalltextLabels"></Text>
																					<Text text="{path:'SUPPLYJSONMODELFREE>batchExpireDate',formatter:'.formatBatchDates'}" width="8em" class="vendorname"></Text>
																				</HBox>
																			</VBox>
																			<HBox width="20em" renderType="Bare">
																				<Text text="Prezzo Riferimentoto:" width="5em" class="smalltextLabels sapUiTinyMarginBeginEnd"></Text>
																				<fiorital:FioritalInput width="5em" value="{path: 'SUPPLYJSONMODELFREE>unitpricetrade', type: '.FloatParse2D'}">
																					<fiorital:customData>
																						<core:CustomData key="REFCOL" value="2" writeToDom="true"/>
																						<core:CustomData key="DATACOL" value="X" writeToDom="true"/>
																					</fiorital:customData>
																				</fiorital:FioritalInput>
																			</HBox>
																		</HBox>
																	</CustomListItem>
																</items>
															</List>
														</cells>
													</ColumnListItem>
												</items>
											</Table>
										</ScrollContainer>
									</Panel>
								</content>
							</IconTabFilter>
						</items>
					</IconTabBar>
				</Panel>
			</content>
			<footer>
				<Toolbar>
					<!--<VBox width="0.5em"></VBox>-->
					<!--<core:Icon src="sap-icon://database" id="iconOverSelection" class="blinking">-->
					<!--	<core:customData>-->
					<!--		<core:CustomData key="OVERSELECTION" value="" writeToDom="true"/>-->
					<!--	</core:customData>-->
					<!--</core:Icon>-->
					<!--<VBox width="0.5em"></VBox>-->
					<!--<Text text="selected boxes: "></Text>-->
					<!--<Text text="-" id="qtySelected"></Text>-->
					<!--<Text text=" / {SUPPLYJSONMODELBASE>/convertedqty} {SUPPLYJSONMODELBASE>/uom}"></Text>-->
					<!--<VBox width="0.1em"></VBox>-->
					<CheckBox id="showGenericBatches" text="Mostra batch generici" select=".changeShowGenerics"/>
					<ToolbarSpacer/>
					<ToolbarSpacer/>
					<Button icon="sap-icon://chain-link" text="Allocate" press=".runAllocation" type="Accept" id="btnAllocation"/>
					<Button icon="sap-icon://decline" text="Cancel" press=".closeAllocation" type="Reject"/>
				</Toolbar>
			</footer>
			<dependents>
				<Popover id="popoverAternativeRoutes" contentHeight="30em" contentWidth="75em" enableScrolling="false" title="Select alternative route">
					<HBox width="100%" height="100%" renderType="Bare">
						<ScrollContainer width="40%" height="100%" vertical="true" horizontal="false" class="borderRightAlternativeRoutesPopup">
							<List width="100%" items="{ALTERNATIVEROUTESPOPOVER>/value}" mode="SingleSelectMaster" id="alternativeRouteList"
								selectionChange="selectAlternativeRoute">
								<CustomListItem>
									<HBox height="7.5em" width="100%" renderType="Bare" alignItems="Center">
										<core:Icon src="sap-icon://radar-chart" size="2em" width="20%"></core:Icon>
										<VBox renderType="Bare" width="75%">
											<HBox renderType="Bare" width="100%">
												<Text text="{ALTERNATIVEROUTESPOPOVER>routeid}" class="boldPopoverAlternativeRoute"></Text>
												<VBox width="0.5em"></VBox>
												<Text text="@ {ALTERNATIVEROUTESPOPOVER>arrivalDate} > {path:'ALTERNATIVEROUTESPOPOVER>arrivalTime',formatter:'.formatFOtime'}"></Text>
											</HBox>
											<HBox height="0.3em"></HBox>
											<Text text="{ALTERNATIVEROUTESPOPOVER>nodeChain}" class="routechain" maxLines="1" width="100%"></Text>
											<HBox height="0.3em"></HBox>
											<HBox renderType="Bare" width="100%">
												<Text text="Carrier out: " width="30%"></Text>
												<Text text="{ALTERNATIVEROUTESPOPOVER>carrierOut}" class="smallCarrier" width="70%"></Text>
											</HBox>
											<HBox height="0.3em"></HBox>
											<HBox renderType="Bare" width="100%">
												<Text text="Carrier in:" width="30%"></Text>
												<Text text="{ALTERNATIVEROUTESPOPOVER>carrierIn}" class="smallCarrier" width="70%"></Text>
											</HBox>
										</VBox>
										<VBox renderType="Bare" width="5%"></VBox>
									</HBox>
								</CustomListItem>
							</List>
						</ScrollContainer>
						<ScrollContainer width="60%" height="100%" vertical="true" horizontal="false">
							<List width="100%" items="{ALTERNATIVEROUTESPOPOVERNODES>/}">
								<CustomListItem>
									<HBox height="4.5em" width="100%" renderType="Bare" alignItems="Center">
										<VBox width="5%"></VBox>
										<Text text="{ALTERNATIVEROUTESPOPOVERNODES>node}" width="15%" class="hdrAllocation1"></Text>
										<VBox width="50%" height="100%" alignContent="Center">
											<HBox height="50%" width="100%" alignItems="Center">
												<core:Icon src="sap-icon://past"></core:Icon>
												<VBox width="0.5em"></VBox>
												<Text text="IN" width="3em" class="textInRoute"></Text>
												<Text
													text="{path:'ALTERNATIVEROUTESPOPOVERNODES>foIn',formatter:'.deleteTrailZeros'} - {path:'ALTERNATIVEROUTESPOPOVERNODES>arrivalDate',formatter:'.formatFOdate'} - {path:'ALTERNATIVEROUTESPOPOVERNODES>arrivalTime',formatter:'.formatFOtime'}"></Text>
											</HBox>
											<HBox height="50%" width="100%" alignItems="Center">
												<core:Icon src="sap-icon://future"></core:Icon>
												<VBox width="0.5em"></VBox>
												<Text text="OUT" width="3em" class="textOutRoute"></Text>
												<Text
													text="{path:'ALTERNATIVEROUTESPOPOVERNODES>foOut',formatter:'.deleteTrailZeros'} - {path:'ALTERNATIVEROUTESPOPOVERNODES>departureDate',formatter:'.formatFOdate'} - {path:'ALTERNATIVEROUTESPOPOVERNODES>departureTime',formatter:'.formatFOtime'}"></Text>
											</HBox>
										</VBox>
										<VBox width="25%" renderType="Bare" height="100%">
											<HBox renderType="Bare" width="100%" height="50%" alignItems="Center">
												<Text text="% Vol." class="smallRouteId" width="30%"></Text>
												<ProgressIndicator class="sapUiSmallMarginBottom" percentValue="50" displayValue="123 mc" showValue="true" state="Success" width="70%"/>
											</HBox>
											<HBox renderType="Bare" width="100%" height="50%" alignItems="Center">
												<Text text="% Mass" class="smallRouteId" width="30%"></Text>
												<ProgressIndicator class="sapUiSmallMarginBottom" percentValue="40" displayValue="12355 kg" showValue="true" state="Success" width="70%"/>
											</HBox>
										</VBox>
										<VBox width="5%"></VBox>
									</HBox>
								</CustomListItem>
							</List>
						</ScrollContainer>
					</HBox>
					<footer>
						<Toolbar>
							<ToolbarSpacer/>
							<Button icon="sap-icon://radar-chart" text="select route" press=".selectedAlternativeSupplyRoute"/>
							<Button icon="sap-icon://sys-back" text="back" press=".backFromRouteDetail"/>
						</Toolbar>
					</footer>
				</Popover>
				<fiorital:FreightOrderManager id="foManagerId"/>
				<fiorital:ATPCDetail id="ATPCdetailExistingAllocation"></fiorital:ATPCDetail>
				<fiorital:AttributeManager id="attributeManagerId" itemsLaw="{path: 'Attribute'}" itemsOther="{path: 'Attribute'}"/>
				<Popover id="popoverAllocationsExisting" contentHeight="20em" contentWidth="65em" verticalScrolling="true" title="Existing Allocations"
					placement="Auto" class="smallScrollBar">
					<List items="{path:'/SotItem', suspended:true }" id="popoverAllocationsExistingList" growing="false" class="allocationtype">
						<CustomListItem>
							<fiorital:FioriTile width="98%" padding="0.5em" class="noPaddingtop" draggable="true"
								color="{ path: 'validity', formatter: '.backColorAllocationType' }">
								<grid:CSSGrid gridTemplateRows="1fr" gridTemplateColumns="1fr 2fr 3fr 2fr 2fr 2fr" gridGap="1rem" width="100%">
									<grid:items>
										<VBox justifyContent="Center" alignItems="Center">
											<core:Icon src="{path:'demandType',formatter:'.iconDemandType'}" size="1.5em"></core:Icon>
										</VBox>
										<VBox justifyContent="Center" height="3.7em">
											<Text text="{path:'validity',formatter:'.textAllocation'}" class="allocationtypetxt"></Text>
											<HBox>
												<HBox width="1em"></HBox>
												<Text text="type: "></Text>
												<HBox width="1em"></HBox>
												<Text text="{demandType}" class="qtybatch demandtype"></Text>
											</HBox>
											<HBox>
												<HBox width="1em"></HBox>
												<Text text="ID: "></Text>
												<HBox width="1em"></HBox>
												<Text text="{path:'demand',formatter:'.deleteTrailZeros'} / {path:'demandPos',formatter:'.deleteTrailZeros'}" class="qtybatch"></Text>
											</HBox>
										</VBox>
										<VBox justifyContent="Center" alignItems="Start">
											<Text text="{customerid}"></Text>
											<Text text="{customername}"></Text>
										</VBox>
										<VBox justifyContent="Center" alignItems="Start">
											<HBox>
												<Text text="Batch: " class="colorcharactbatch"></Text>
												<HBox width="1em"></HBox>
												<Text text="{charg}"></Text>
											</HBox>
										</VBox>
										<VBox justifyContent="Center" alignItems="Start">
											<HBox>
												<Text text="{openqty}" class="allocationQty"></Text>
												<HBox width="1em"></HBox>
												<Text text="{uom}"></Text>
											</HBox>
										</VBox>
										<VBox justifyContent="Center" alignItems="Center">
											<Text text="Prep. warehouse " class="colorcharactbatch"></Text>
											<HBox width="1em"></HBox>
											<Text text="{path:'preparationwh',formatter:'.prepWarehouse'}"></Text>
										</VBox>
									</grid:items>
								</grid:CSSGrid>
							</fiorital:FioriTile>
						</CustomListItem>
					</List>
					<footer>
						<Toolbar>
							<ToolbarSpacer/>
							<Button icon="sap-icon://cancel" text="exit" press=".closePopoverExixstingAllocations" type="Reject"/>
						</Toolbar>
					</footer>
				</Popover>
			</dependents>
		</Page>
	</Dialog>
</core:FragmentDefinition>